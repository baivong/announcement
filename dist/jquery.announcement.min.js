/*!
*  jquery.announcement - v1.0.1
*  This plugin adds a fixed board at the bottom of your browser screen to display announcements.
*  https://github.com/baivong/announcement
*
*  Made by Zzbaivong
*  Under MIT License
*/!function(a,b,c,d){"use strict";function e(b,c){return"remove"===this.getCookie("jquery.announcement")?void a(b).remove():(this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.nodes={},this.size=0,this.active=0,this.run=d,this.build(),void this.init())}var f="announcement",g={title:"Announcement",showToggle:!0,showClose:!1,position:"bottom-right",width:300,height:"auto",speed:10,effect:"fading"};a.extend(e.prototype,{getCookie:function(a){var b,d,e=a+"=",f=c.cookie.indexOf(e);return f!==-1?(b=f+e.length,d=c.cookie.indexOf(";",b),d===-1&&(d=c.cookie.length),decodeURIComponent(c.cookie.substring(b,d))):null},setCookie:function(a,b,d,e){var f="",g=new Date;d&&(g.setTime(g.getTime()+24*d*60*60*1e3),d="; expires="+g.toUTCString()),e||(e="/"),c.cookie=a+"="+b+"; path="+e+d+f+";"},randomEffect:function(a){var b="zoom-in zoom-out rotate-left rotate-right move-top move-right move-bottom move-left skew-top skew-right skew-bottom skew-left";return a&&this.nodes.list.removeClass(b),b=b.split(" "),b=b[Math.floor(Math.random()*b.length)]},genNode:function(b){return a("<div>",{class:"announcement-"+b})},build:function(){var b,c,d,e,f=this.settings,g=f.effect,h=this.genNode("wrap"),i=this.genNode("title"),j=this.genNode("content"),k=this.genNode("button"),l=a(this.element).addClass("announcement-list"),m=l.children("li"),n=0;this.size=m.length,this.size&&(j.append(l),h.addClass(f.position),h.append(k).append(i).append(j).appendTo("body"),f.showClose&&(c=this.genNode("close"),k.append(c)),f.showToggle&&(b=this.genNode("toggle"),k.append(b)),f.showToggle||f.showClose||i.addClass("no-button"),f.showToggle&&f.showClose&&i.addClass("two-button"),""!==f.title&&i.text(f.title),1===this.size?n=m.eq(0).height():(d=this.genNode("paging"),j.append(d),"auto"!==f.width&&"number"===a.type(f.width)&&l.add(m).width(f.width),l.add(m).width(l.width()),h.width(h.width()),m.each(function(b,c){var f=a("<span>",{"data-index":b,text:b+1}),g=a(c).height();g>n&&(n=g),f.appendTo(d),e=0===b?f:e.add(f)})),"auto"!==f.height&&"number"===a.type(f.height)&&(n=f.height),n>0&&l.add(m).height(n),"random"!==f.effect&&"shuffle"!==f.effect||(g=this.randomEffect()),"fading"!==g&&(g+=" fading"),l.addClass(g),"hidden"===this.getCookie("jquery.announcement")&&(h.addClass("hidden"),j.hide()),this.nodes={wrap:h,title:i,content:j,toggle:b,close:c,list:l,items:m,numbers:e})},show:function(a){var b=this.nodes;"shuffle"===this.settings.effect&&b.list.addClass(this.randomEffect(!0)),b.content.find(".active").removeClass("active"),b.items.eq(a).addClass("active"),b.numbers.eq(a).addClass("active"),this.active=a},play:function(){var a=this,b=a.settings;0===b.speed||a.nodes.wrap.hasClass("hidden")||(a.active++,a.active>=a.size&&(a.active=0),clearTimeout(a.run),a.run=setTimeout(function(){a.show(a.active),a.play()},1e3*b.speed))},stop:function(){this.run&&(clearTimeout(this.run),this.run=d,this.active--)},init:function(){var b=this,c=b.settings,d=b.nodes;b.show(0),b.play(),b.size>1&&d.numbers.on("click",function(){var c=a(this).data("index");c!==b.active&&b.show(c)}),c.showToggle&&d.toggle.on("click",function(){d.content.slideToggle("slow",function(){d.wrap.hasClass("hidden")?(d.wrap.removeClass("hidden"),b.play(),b.setCookie("jquery.announcement","hidden",-1)):(d.wrap.addClass("hidden"),b.stop(),b.setCookie("jquery.announcement","hidden",1))})}),c.showClose&&d.close.on("click",function(){b.stop(),d.wrap.remove(),b.setCookie("jquery.announcement","remove",1)}),c.speed>0&&d.wrap.on("mouseleave",function(){b.play()}).on("mouseenter",function(){b.stop()})}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);
