/*!
*  jquery.announcement - v1.2.0
*  Adds a fixed board at the bottom of your browser screen to display announcements.
*  https://github.com/baivong/announcement
*
*  Made by Zzbaivong
*  Under MIT License
*/

!function(a,b,c,d){"use strict";function e(b,c){return"remove"===this.getCookie("jquery.announcement")?void a(b).remove():(this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.nodes={},this.size=0,this.current=0,this.count=0,this.run=d,this.build(),void(this.size>0&&this.init()))}var f="announcement",g={title:"Announcement",showToggle:!0,showClose:!1,autoHide:"auto",autoClose:0,position:"bottom-right",width:300,height:"auto",speed:10,effect:"fading"};a.extend(e.prototype,{getCookie:function(a){var b,d,e=a+"=",f=c.cookie.indexOf(e);return f!==-1?(b=f+e.length,d=c.cookie.indexOf(";",b),d===-1&&(d=c.cookie.length),decodeURIComponent(c.cookie.substring(b,d))):null},setCookie:function(a,b,d,e){var f="",g=new Date;d&&(g.setTime(g.getTime()+24*d*60*60*1e3),d="; expires="+g.toUTCString()),e||(e="/"),c.cookie=a+"="+b+"; path="+e+d+f+";"},randomEffect:function(a){var b="zoom-in zoom-out rotate-left rotate-right move-top move-right move-bottom move-left skew-top skew-right skew-bottom skew-left";return a&&this.nodes.list.removeClass(b),b=b.split(" "),b=b[Math.floor(Math.random()*b.length)]},genNode:function(b){return a("<div>",{class:"announcement-"+b})},build:function(){var b,c,d,e,f=this.settings,g=f.effect,h=this.genNode("wrap"),i=this.genNode("title"),j=this.genNode("content"),k=this.genNode("button"),l=a(this.element).addClass("announcement-list"),m=l.children("li"),n=0;this.size=m.length,this.size&&(j.append(l),h.addClass(f.position),h.append(k).append(i).append(j).appendTo("body"),f.showClose&&(c=this.genNode("close"),k.append(c)),f.showToggle&&(b=this.genNode("toggle"),k.append(b)),f.showToggle||f.showClose||i.addClass("no-button"),f.showToggle&&f.showClose&&i.addClass("two-button"),""!==f.title&&i.text(f.title),"auto"===f.width&&(f.width=l.width()),l.add(m).width(f.width),h.width(h.width()),1===this.size?n=m.eq(0).height():(d=this.genNode("paging"),j.append(d),m.each(function(b,c){var f=a("<span>",{"data-index":b,text:b+1}),g=a(c).height();g>n&&(n=g),f.appendTo(d),e=0===b?f:e.add(f)})),"auto"!==f.height&&"number"===a.type(f.height)&&(n=f.height),n>0&&l.add(m).height(n),"random"!==f.effect&&"shuffle"!==f.effect||(g=this.randomEffect()),"fading"!==g&&(g+=" fading"),l.addClass(g),"hidden"===this.getCookie("jquery.announcement")&&(h.addClass("hidden"),j.hide()),this.nodes={wrap:h,title:i,content:j,toggle:b,close:c,list:l,items:m,numbers:e})},active:function(a){var b=this.nodes,c=this.settings;"shuffle"===c.effect&&b.list.addClass(this.randomEffect(!0)),b.content.find(".active").removeClass("active"),b.items.eq(a).addClass("active"),this.size>1&&b.numbers.eq(a).addClass("active"),this.current=a,this.count++,this.count>this.size&&("auto"===c.autoHide&&c.showToggle&&(this.minmax(),c.autoHide=0),"auto"===c.autoClose&&(this.destroy(),c.autoClose=0))},play:function(){var a=this,b=a.settings,c=a.nodes;0===b.speed||1===b.size||c.wrap.hasClass("hidden")||(a.current++,a.current>=a.size&&(a.current=0),clearTimeout(a.run),a.run=setTimeout(function(){a.active(a.current),a.play()},1e3*b.speed))},stop:function(){this.run&&(clearTimeout(this.run),this.run=d,this.current--)},minmax:function(){var a=this,b=this.nodes.wrap;b.length&&a.nodes.content.slideToggle("slow",function(){b.hasClass("hidden")?(b.removeClass("hidden"),a.play(),a.setCookie("jquery.announcement","hidden",-1)):(b.addClass("hidden"),a.stop(),a.setCookie("jquery.announcement","hidden",1))})},destroy:function(){var a=this.nodes.wrap;a.length&&(this.stop(),a.fadeOut("slow",function(){a.remove()}),this.setCookie("jquery.announcement","remove",1))},init:function(){var b=this,c=b.settings,d=b.nodes;b.active(0),b.play(),b.size>1&&d.numbers.on("click",function(){var c=a(this).data("index");c!==b.current&&b.active(c)}),c.showToggle&&d.toggle.on("click",function(){b.minmax()}),c.showClose&&d.close.on("click",function(){b.destroy()}),c.speed>0&&d.wrap.on("mouseleave",function(){b.play()}).on("mouseenter",function(){b.stop()}),c.showToggle&&("number"==typeof c.autoHide&&c.autoHide>0||"auto"===c.autoHide&&1===b.size)&&("auto"===c.autoHide&&(c.autoHide=c.speed),setTimeout(function(){d.wrap.hasClass("hidden")||b.minmax()},1e3*c.autoHide)),("number"==typeof c.autoClose&&c.autoClose>0||"auto"===c.autoClose&&1===b.size)&&("auto"===c.autoClose&&(c.autoClose=c.speed),setTimeout(function(){b.destroy()},1e3*c.autoClose))}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);
